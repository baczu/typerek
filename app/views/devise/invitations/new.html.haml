= render :partial => "shared/menu", :locals => { :s => "invitation" }
%h2 Zaproszenia
.well.bs-component
  = form_for resource, :as => resource_name, :url => invitation_path(resource_name), :html => {:method => :post, :class => "form-horizontal"} do |f|
    - resource.class.invite_key_fields.each do |field|
      .form-group
        = f.label :username, "Login", :class => "col-lg-2 control-label"
        .col-lg-10= f.text_field :username, :class => "form-control"
      .form-group
        .col-lg-10.col-lg-offset-2
          = f.submit "Generuj zaproszenie", :class => "btn btn-primary"
%h2 Lista użytkowników
%table.table.table-hover.table-striped
  %thead
    %th Nazwa użytkownika
    %th Stan konta
    %th Ustawienia
  %tbody
    - User.order(&:username).each do |user|
      %tr
        %td= user.username
        %td
          = user_status(user)
          = user_fin(user)
        %td
          = link_to "Finalizuj", fin_user_path(user), :confirm => "Czy na pewno z użytkownikiem jesteśmy kwita?" unless user.fin?
          = link_to "Niefinalizuj", fin_revoke_user_path(user), :confirm => "Jednak nie jesteśmy kwita z użytkownikiem?" if user.fin?
          |
          = link_to "Resetuj dostęp", resend_invitation_user_path(user), :confirm => "Czy na pewno chcesz wygenerować ponownie link z zaproszeniem?" if user != current_user
          |
          = link_to "Usuń", user_path(user), :method => :delete, :confirm => "Czy na pewno chcesz usunąć użytkownika?" if user != current_user
